schema concept {
    document concept {
        # E.g. Q880
        field id type string {
            indexing: attribute | summary | index
        }
        # Used for searching.
        #
        # E.g. 14696,15037
        field revisions_ids_flat type string {
            indexing: attribute | summary | index
        }

        struct concept_ref {
            field id type string {}
            field revision_id type string {}
        }

        struct instance {
            # E.g. fishing sector
            field preferred_label type string {}
            field description type string {}
            field definition type string {}
            field alternative_labels type array<string> {}
            field negative_labels type array<string> {}
            # E.g. Q110, 290
            #
            # We can't do self-references for documents in Vespa, so
            # use strings for the IDs.
            field subconcept_of type array<concept_ref> {}
            # E.g. Q110:1601
            field subconcept_of_flat type string {}
            field has_subconcept type array<concept_ref> {}
            field has_subconcept_flat type string {}
            field relative_concepts type array<concept_ref> {}
            field relative_concepts_flat type string {}
            field recursive_subconcept_of type array<concept_ref> {}
            field recursive_subconcept_of_flat type string {}
            field recursive_has_subconcept type bool {}
        }

        # E.g <14696, <..>>
        field revisions type map<string, instance> {
            indexing: summary

            struct-field key {
                indexing: attribute
                attribute: fast-search
            }
            struct-field value.preferred_label {
                indexing: attribute
                attribute: fast-search
            }
            struct-field value.subconcept_of_flat {
                indexing: attribute
                attribute: fast-search
            }
            struct-field value.has_subconcept_flat {
                indexing: attribute
                attribute: fast-search
            }
            struct-field value.relative_concepts_flat {
                indexing: attribute
                attribute: fast-search
            }
            struct-field value.recursive_subconcept_of_flat {
                indexing: attribute
                attribute: fast-search
            }
        }
    }
}
