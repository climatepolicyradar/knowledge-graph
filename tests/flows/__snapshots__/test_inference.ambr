# serializer version: 1
# name: test_inference_batch_of_documents_cpu
  '[{"Document stem": "GEF.document.0.1", "Status": "\\u2713", "Exception": "N/A"}]'
# ---
# name: test_inference_batch_of_documents_cpu_empty_batch
  '[]'
# ---
# name: test_inference_batch_of_documents_cpu_with_failures
  '[{"Document stem": "NonExistent.doc.1", "Status": "\\u2717", "Exception": "An error occurred (NoSuchKey) when calling the GetObject operation: The specified key does not exist."}, {"Document stem": "AnotherMissing.doc.2", "Status": "\\u2717", "Exception": "An error occurred (NoSuchKey) when calling the GetObject operation: The specified key does not exist."}]'
# ---
# name: test_run_classifier_inference_on_document
  SingleDocumentInferenceResult(labelled_passages=[], document_stem='HTML.document.0.1', wikibase_id='Q788', classifier_id='6vxrmcuf')
# ---
# name: test_run_classifier_inference_on_document.1
  SingleDocumentInferenceResult(labelled_passages=[LabelledPassage(id='p_0_b_0', text='Ministry of Environment and Natural Resources'), LabelledPassage(id='p_0_b_1', text='Kenya National Adaptation Plan\n2015-2030'), LabelledPassage(id='p_4_b_0', text='Prof Judi Wakhungu, Cabinet Secretary, Ministry of Environment and\nNatural Resources'), LabelledPassage(id='p_4_b_1', text="Climate change has adverse impacts on our country's economic\ndevelopment and threatens the realisation of our Vision 2030\ngoals of creating a competitive and prosperous nation with a\nhigh quality of life. Kenya's economy is highly dependent on\nnatural resources, meaning that recurring droughts, erratic\nrainfall patterns and floods will continue to negatively impact\nlivelihoods and community assets."), LabelledPassage(id='p_4_b_2', text="The Government of Kenya recognizes the threats posed by climate\nchange and has taken action to address them. In this regard, my\nministry coordinated the development of the National Climate\nChange Response Strategy in 2010, and the National Climate\nChange Action Plan (NCCAP 2013-2017) in 2012. This National Adaptation Plan (NAP) marks yet\nanother landmark in efforts to address the country's vulnerability and resilience to climate change."), LabelledPassage(id='p_4_b_3', text='The NAP was developed through a cooperative and consultative process that included stakeholders\nfrom the Government, the private sector, and the civil society; with the support of international\ndevelopment agencies. All of these partners continue to support the implementation of the NAP\nthrough the design, financing and implementation of priority actions. Effective implementation of\nthe NAP will be supported through the establishment of enabling governance structures, including\nthose set out in the Climate Change Act, that was enacted into law by His Excellency, the President\nin May 2016. Additional support and increased partnerships will be required for Kenya to achieve\nits adaptation goals.'), LabelledPassage(id='p_4_b_4', text="The Government of Kenya is fully committed to addressing climate change domestically, as well as\ndemonstrating leadership in the global fight against climate change. Kenya submitted an ambitious\nIntended Nationally Determined Contribution (INDC) to the United Nations Framework Convention\non Climate Change (UNFCCC). INDCs are anchored in the Paris Agreement as five-year Nationally\nDetermined Contribution (NDC) iterative cycles. It is informative that the Paris Agreement, indeed,\nrecognises the role of NDCS and NAPs as the vehicles for delivering on mitigation and adaptation\nobligations, respectively, under the Agreement. Our INDC reiterates that adaptation is Kenya's priority\nresponse to climate change, and this NAP is the foundation of Kenya's contribution on adaptation."), LabelledPassage(id='p_5_b_0', text="This NAP demonstrates Kenya's commitment to the Paris Agreement, and will help bring to life our\ncritical responses to the impacts of climate change. Building climate resilience in as low carbon a\nmanner as possible will ensure that Kenya contributes to the goals of the Paris Agreement and the\nSustainable Development Goals."), LabelledPassage(id='p_5_b_2', text='Ministry of Environment and Natural Resources'), LabelledPassage(id='p_6_b_0', text='Charles Sunkuli, Principal Secretary - State Department of Environment'), LabelledPassage(id='p_6_b_1', text="This National Adaptation Plan (NAP 2015-2030) is a critical response\nto the climate change challenge facing our country. The NAP is\nKenya's first plan on adaptation, and demonstrates our commitment\nto operationalise the National Climate Change Action Plan by\nmainstreaming adaptation across all sectors in the national planning,\nbudgeting and implementation processes. Our mainstreaming\napproach recognizes that climate change is a cross-cutting sustainable\ndevelopment issue with economic, social and environmental impacts.\nThe NAP was validated at a national workshop held in Nairobi on 18\nNovember 2015."), LabelledPassage(id='p_6_b_2', text="The NAP sets out Kenya's national circumstances, focusing on current and future climate trends,\nand describes the country's vulnerability to climate change. The NAP also elaborates institutional\narrangements, including monitoring and evaluation processes. Priority actions are identified in 20\nplanning sectors for the short, medium and long term. This builds on the premise that all our socio-\neconomic sectors are vulnerable to climate change impacts, although the manifestation of these\nimpacts may vary from one sector to the other."), LabelledPassage(id='p_6_b_3', text='The NAP was prepared through an extensive consultation process. The consultations cut across\nstakeholders from within the Government, and non-state-actors like civil society, academia and the\nprivate sector, at both national and county levels. The process was coordinated by personnel from the\nNational Climate Change Secretariat, whom I would like to recognise for their professionalism and\ndiligence throughout the process. The technical inputs of the Adaptation Thematic Working Group\n(TWG), whose membership was inclusive and drawn from Government, civil society, academia and\nthe private sector institutions, enriched the process. The contribution of the TWG members, both\nindividually and corporately, is greatly appreciated. The Ministry is also grateful to the national and\ninternational adaptation experts who provided valuable technical guidance to the process.'), LabelledPassage(id='p_6_b_4', text="The NAP was finalised with the support of the Technical Assistance component of the Strengthening\nAdaptation and Resilience to Climate Change Plus (STARCK+) programme, which is funded by the\nUnited Kingdom's Department for International Development (DFID). I would, consequently, like\nto thank DFID for this support."), LabelledPassage(id='p_7_b_0', text="The NAP will be distributed widely to national and county government institutions, and amongst\nnon-state actors, to guide their expected implementation roles. It is expected that development\npartners will find the information helpful in aligning their funding preferences with Kenya's aspirations\nto attain a low carbon climate resilient economy by addressing climate change adaptation and\nmitigation on equal footing."), LabelledPassage(id='p_7_b_1', text='The Government is committed to the implementation and continuous revision of the National\nAdaptation Plan and its integration in the national development agenda, not only for the attainment\nof Vision 2030, but also for the realisation of the goals of the Paris Agreement and the UN Sustainable\nDevelopment Goals.'), LabelledPassage(id='p_7_b_3', text='Principal Secretary - State Department of Environment, Ministry of Environment\nand Natural Resources'), LabelledPassage(id='p_8_b_0', text='National Adaptation Plan Thematic\nWorking Group'), LabelledPassage(id='p_8_b_1', text='Victor Orindi (Chair)'), LabelledPassage(id='p_8_b_2', text='Ministry of Agriculture Livestock and Fisheries')], document_stem='GEF.document.0.1', wikibase_id='Q788', classifier_id='6vxrmcuf')
# ---
# name: test_store_inference_result
  InferenceResult(requested_document_stems=['TEST.DOC.1.1'], classifier_specs=[ClassifierSpec(concept_id='xyz78abc', wikibase_id='Q788', classifier_id='abcd2345', classifiers_profile=None, wandb_registry_version=Version('v1'), compute_environment=None, dont_run_on=None)], batch_inference_results=[BatchInferenceResult(batch_document_stems=['TEST.DOC.1.1'], successful_document_stems=['TEST.DOC.1.1'], classifier_spec=ClassifierSpec(concept_id='xyz78abc', wikibase_id='Q788', classifier_id='abcd2345', classifiers_profile=None, wandb_registry_version=Version('v1'), compute_environment=None, dont_run_on=None))], successful_classifier_specs=[ClassifierSpec(concept_id='xyz78abc', wikibase_id='Q788', classifier_id='abcd2345', classifiers_profile=None, wandb_registry_version=Version('v1'), compute_environment=None, dont_run_on=None)], failed_classifier_specs=[], successful_document_stems={'TEST.DOC.1.1'})
# ---
# name: test_store_labels[failures]
  list([
  ])
# ---
# name: test_store_labels[successes]
  list([
    SingleDocumentInferenceResult(labelled_passages=[LabelledPassage(id='2r7fcnmj', text='This is a test text block')], document_stem='TEST.DOC.0.1', wikibase_id='Q9081', classifier_id='2tnmbxaw'),
  ])
# ---
# name: test_store_labels[unknown_failures]
  list([
  ])
# ---
# name: test_store_metadata
  Metadata(flow_run=FlowRun(id=UUID('0199bef8-7e41-7afc-9b4c-d3abd406be84'), name='test-flow-run', flow_id=UUID('b213352f-3214-48e3-8f5d-ec19959cb28e'), state_id=None, deployment_id=None, deployment_version=None, work_queue_name=None, flow_version=None, parameters={}, idempotency_key=None, context={}, empirical_policy=FlowRunPolicy(max_retries=0, retry_delay_seconds=0.0, retries=None, retry_delay=None, pause_keys=set(), resuming=False, retry_type=None), tags=['tag:value1', 'sha:abc123', 'branch:main'], labels={}, parent_task_run_id=None, run_count=0, expected_start_time=None, next_scheduled_start_time=None, start_time=None, end_time=None, total_run_time=datetime.timedelta(0), estimated_run_time=datetime.timedelta(0), estimated_start_time_delta=datetime.timedelta(0), auto_scheduled=False, infrastructure_document_id=None, infrastructure_pid=None, created_by=None, work_queue_id=None, work_pool_id=None, work_pool_name=None, state=Running(message=None, type=RUNNING, result=None), job_variables=None, state_type=None, state_name=None), run_output_identifier='2025-01-15T10:30-test-flow-run', classifier_specs=[ClassifierSpec(concept_id='xyz78abc', wikibase_id='Q788', classifier_id='abcd2345', classifiers_profile=None, wandb_registry_version=Version('v1'), compute_environment=None, dont_run_on=None)], config=Config(cache_bucket='test_bucket', aggregate_document_source_prefix='labelled_passages/', aggregate_inference_results_prefix='inference_results/', inference_document_source_prefix='embeddings_input/', inference_document_target_prefix='labelled_passages/', bucket_region='eu-west-1', aws_env=<AwsEnv.sandbox: 'sandbox'>, pipeline_state_prefix='input/', local_classifier_dir=Path('data/processed/classifiers'), wandb_model_org='climatepolicyradar_UZODYJSN66HCQ', wandb_model_registry='test_org/test_wandb_model_registry', wandb_entity='test_entity', wandb_api_key=SecretStr('**********'), wikibase_username='test_username', wikibase_password=SecretStr('**********'), wikibase_url='https://test.test.test', s3_concurrency_limit=50))
# ---
